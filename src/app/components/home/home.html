<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Fleet Scorecard</h1>
    <p>Monitor fleet performance and maintenance status</p>
  </div>
  
  <div class="dashboard-content">
    <!-- Key Metrics -->
    <div class="metrics-section">
      <div class="metric-card">
        <div class="metric-icon">
          <i class="fas fa-truck"></i>
        </div>
        <div class="metric-content">
          <div class="metric-value">{{ totalTrucks }}</div>
          <div class="metric-label">Fleet Size</div>
        </div>
      </div>
      
      <div class="metric-card alert">
        <div class="metric-icon">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div class="metric-content">
          <div class="metric-value">{{ totalFailures }}</div>
          <div class="metric-label">Total Issues</div>
        </div>
      </div>
      
      <div class="metric-card warning">
        <div class="metric-icon">
          <i class="fas fa-tools"></i>
        </div>
        <div class="metric-content">
          <div class="metric-value">{{ avgFailuresPerTruck }}</div>
          <div class="metric-label">Avg Issues/Unit</div>
        </div>
      </div>
      
      <div class="metric-card critical">
        <div class="metric-icon">
          <i class="fas fa-exclamation-circle"></i>
        </div>
        <div class="metric-content">
          <div class="metric-value">{{ criticalFailures }}</div>
          <div class="metric-label">Critical Issues</div>
        </div>
      </div>
    </div>
    
    <!-- Failure Analysis -->
    <div class="analysis-section">
      <div class="section-header">
        <i class="fas fa-chart-bar"></i>
        <h3>Failure Analysis</h3>
      </div>
      
      <div class="analysis-grid">
        <div class="analysis-item" *ngFor="let category of failureCategories">
          <div class="analysis-label">
            <span class="category-name">{{ category.name }}</span>
            <span class="category-count">{{ category.count }}</span>
          </div>
          <div class="analysis-bar">
            <div class="bar-fill" [style.width.%]="category.percentage"></div>
          </div>
          <div class="analysis-percentage">{{ category.percentage }}%</div>
        </div>
      </div>
    </div>

    <!-- Fleet by Manufacturer -->
    <div class="manufacturer-section" *ngIf="trucks.length > 0">
      <div class="section-header">
        <i class="fas fa-industry"></i>
        <h3>Fleet by Manufacturer</h3>
      </div>

      <div class="manufacturer-grid">
        <div class="manufacturer-item" *ngFor="let truck of trucks" [class]="'manufacturer-' + truck.manufacturer?.toLowerCase()">
          <div class="manufacturer-logo-container" *ngIf="getManufacturerLogo(truck)">
            <img [src]="getManufacturerLogo(truck)" [alt]="truck.manufacturer" class="manufacturer-logo-img">
          </div>
          <div class="truck-info">
            <div class="truck-model">{{ truck.model }}</div>
            <div class="truck-unit" *ngIf="truck.unitNumber">{{ truck.unitNumber }}</div>
            <div class="truck-status" [ngClass]="{
              'status-critical': truck.failures.length >= 3,
              'status-warning': truck.failures.length >= 2 && truck.failures.length < 3,
              'status-minor': truck.failures.length >= 1 && truck.failures.length < 2,
              'status-good': truck.failures.length === 0
            }">
              {{ truck.failures.length === 0 ? 'Operational' : truck.failures.length + ' issue' + (truck.failures.length > 1 ? 's' : '') }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Fleet Status -->
    <div class="status-section">
      <div class="section-header">
        <i class="fas fa-clipboard-list"></i>
        <h3>Fleet Status</h3>
      </div>
      
      <div class="status-grid">
        <div class="status-card">
          <div class="status-icon">
            <i class="fas fa-tachometer-alt"></i>
          </div>
          <div class="status-info">
            <div class="status-title">High Mileage</div>
            <div class="status-value">{{ highMileageTrucks }} units</div>
            <div class="status-desc">Over 200k km</div>
          </div>
        </div>
        
        <div class="status-card">
          <div class="status-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="status-info">
            <div class="status-title">Engine Hours</div>
            <div class="status-value">{{ highEngineHours }} units</div>
            <div class="status-desc">Over 5000h</div>
          </div>
        </div>
        
        <div class="status-card">
          <div class="status-icon">
            <i class="fas fa-wrench"></i>
          </div>
          <div class="status-info">
            <div class="status-title">Maintenance Due</div>
            <div class="status-value">{{ maintenanceDue }} units</div>
            <div class="status-desc">Need attention</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
