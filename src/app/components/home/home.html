<div class="dashboard-container fade-in">
  <div class="dashboard-header animate-stagger">
    <h1>Fleet Scorecard</h1>
    <p>Monitor fleet performance and maintenance status</p>
  </div>
  
  <div class="dashboard-content">
    <!-- Key Metrics -->
    <div class="metrics-section">
      <div class="metric-card card-hover animate-stagger" style="animation-delay: 0.1s">
        <div class="metric-icon">
          <i class="fas fa-truck"></i>
        </div>
        <div class="metric-content">
          <div class="metric-value">{{ totalTrucks }}</div>
          <div class="metric-label">Fleet Size</div>
        </div>
      </div>

      <div class="metric-card alert card-hover animate-stagger" style="animation-delay: 0.2s">
        <div class="metric-icon">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div class="metric-content">
          <div class="metric-value">{{ totalFailures }}</div>
          <div class="metric-label">Total Issues</div>
        </div>
      </div>

      <div class="metric-card warning card-hover animate-stagger" style="animation-delay: 0.3s">
        <div class="metric-icon">
          <i class="fas fa-tools"></i>
        </div>
        <div class="metric-content">
          <div class="metric-value">{{ avgFailuresPerTruck }}</div>
          <div class="metric-label">Avg Issues/Unit</div>
        </div>
      </div>

      <div class="metric-card critical card-hover animate-stagger" style="animation-delay: 0.4s">
        <div class="metric-icon">
          <i class="fas fa-exclamation-circle"></i>
        </div>
        <div class="metric-content">
          <div class="metric-value">{{ criticalFailures }}</div>
          <div class="metric-label">Critical Issues</div>
        </div>
      </div>
    </div>
    
    <!-- Failure Analysis -->
    <div class="analysis-section card-hover animate-stagger" style="animation-delay: 0.5s">
      <div class="section-header">
        <i class="fas fa-chart-bar"></i>
        <h3>Issues by Category</h3>
      </div>
      <p class="section-description">Distribution of vehicle issues across different system categories</p>

      <div *ngIf="failureCategories.length > 0; else noFailures" class="analysis-grid">
        <div class="analysis-item" *ngFor="let category of failureCategories">
          <div class="analysis-header">
            <div class="analysis-label">
              <span class="category-name">{{ category.name }}</span>
              <span class="category-stats">
                <span class="category-count">{{ category.count }} issue{{ category.count !== 1 ? 's' : '' }}</span>
                <span class="category-percentage">{{ category.percentage }}%</span>
              </span>
            </div>
          </div>
          <div class="analysis-bar-container">
            <div class="analysis-bar">
              <div class="bar-fill" [style.width.%]="category.percentage" [class]="getBarClass(category.name)"></div>
            </div>
            <span class="bar-percentage">{{ category.percentage }}%</span>
          </div>
        </div>
      </div>

      <ng-template #noFailures>
        <div class="no-failures">
          <i class="fas fa-check-circle"></i>
          <p>No issues reported across the fleet</p>
          <span class="no-failures-desc">All vehicles are operating normally</span>
        </div>
      </ng-template>
    </div>


    <!-- Fleet Status -->
    <div class="status-section card-hover animate-stagger" style="animation-delay: 0.6s">
      <div class="section-header">
        <i class="fas fa-clipboard-list"></i>
        <h3>Fleet Status</h3>
      </div>

      <div class="status-grid">
        <div class="status-card card-hover animate-stagger" style="animation-delay: 0.7s">
          <div class="status-icon">
            <i class="fas fa-tachometer-alt"></i>
          </div>
          <div class="status-info">
            <div class="status-title">High Mileage</div>
            <div class="status-value">{{ highMileageTrucks }} units</div>
            <div class="status-desc">Over 200k mi</div>
          </div>
        </div>

        <div class="status-card card-hover animate-stagger" style="animation-delay: 0.8s">
          <div class="status-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="status-info">
            <div class="status-title">Engine Hours</div>
            <div class="status-value">{{ highEngineHours }} units</div>
            <div class="status-desc">Over 5000h</div>
          </div>
        </div>

        <div class="status-card card-hover animate-stagger" style="animation-delay: 0.9s">
          <div class="status-icon">
            <i class="fas fa-wrench"></i>
          </div>
          <div class="status-info">
            <div class="status-title">Maintenance Due</div>
            <div class="status-value">{{ maintenanceDue }} units</div>
            <div class="status-desc">Need attention</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
